import React, { useContext } from "react";
import styled, { keyframes } from "styled-components";
import Flex from "../../../components/Box/Flex";
import { LogoIcon, LogoWithTextIcon } from "../../../components/Svg";
import { MenuContext } from "../context";

interface Props {
  isDark: boolean;
  href: string;
}

const blink = keyframes`
  0%,  100% { transform: scaleY(1); }
  50% { transform:  scaleY(0.1); }
`;

const StyledLink = styled("a")`
  display: flex;
  align-items: center;
  .mobile-icon {
    width: 32px;
    ${({ theme }) => theme.mediaQueries.nav} {
      display: none;
    }
  }
  .desktop-icon {
    width: 160px;
    display: none;
    ${({ theme }) => theme.mediaQueries.nav} {
      display: block;
    }
  }
  .eye {
    animation-delay: 20ms;
  }
  &:hover {
    .eye {
      transform-origin: center 60%;
      animation-name: ${blink};
      animation-duration: 350ms;
      animation-iteration-count: 1;
    }
  }
`;

const Logo: React.FC<Props> = ({ isDark, href }) => {
  const { linkComponent } = useContext(MenuContext);
  const isAbsoluteUrl = href.startsWith("http");
  const innerLogo = (
    <>
      <LogoIcon className="mobile-icon" />
      <LogoWithTextIcon className="desktop-icon" isDark={isDark} />
    </>
  );

  return (
    <Flex>
      {isAbsoluteUrl ? (
        <StyledLink as="a" href={href} aria-label="Quasar home page">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 981 222.08" width="150px">
            <g>
              <path fill="#192d50" d="M350.37,42.41v76a75.95,75.95,0,1,1-151.9,0V42.41h27.12v76a48.83,48.83,0,1,0,97.65,0V42.41Z"/>
              <path fill="#192d50" d="M632.78,84.51v-.87A14,14,0,0,0,618.9,69.75H557.27a14,14,0,0,0-13.89,13.89v.87A14,14,0,0,0,557.27,98.4H612A47.63,47.63,0,0,1,647.32,114c.65.65,1.09,1.3,1.74,2A48,48,0,0,1,612,194.31H564.43a48,48,0,0,1-48-48H543.6a20.84,20.84,0,0,0,20.83,20.84H612a20.84,20.84,0,1,0,0-41.67H557.27A40.58,40.58,0,0,1,528.84,114a38.06,38.06,0,0,1-5.21-6.51,40.38,40.38,0,0,1-7.16-23.22v-.87a40.94,40.94,0,0,1,40.8-41H618.9a41.12,41.12,0,0,1,41,41v.87Z"/>
              <path fill="#192d50" d="M822.71,194.31H792.33l-13.89-27.12-33.2-65.1L712,167.19l-13.89,27.12H667.77l13.89-27.12L745.24,42.41l63.58,124.78Z"/>
              <path fill="#192d50" d="M965.11,167.62,979,194.74H948.62l-13.89-27.12-14.54-28.43-.65-1.3a26.88,26.88,0,0,0-23-13H869.42v69.87H842.29V42.85h95.92A40.73,40.73,0,0,1,979,83.64,41.11,41.11,0,0,1,955.13,121a36,36,0,0,1-11.72,3.26Zm-26.9-69.87a12.65,12.65,0,0,0,5.64-1.31,13.78,13.78,0,0,0,8.24-12.58,14.31,14.31,0,0,0-4.12-10A13.66,13.66,0,0,0,938.21,70H869.42V98Z"/>
              <polygon fill="#fff" points="100.3 112.07 101.06 113.46 101.82 112.07 103.21 111.31 101.82 110.55 101.06 109.16 100.3 110.55 98.91 111.31 100.3 112.07"/>
              <path fill="#192d50" d="M104.12,119.73,2.6,14.39,84.9,133.52l.59.13C101.58,135.11,104.12,119.73,104.12,119.73Z"/>
              <path fill="#192d50" d="M176.35,118.16A85.21,85.21,0,0,0,34.4,56.09l5.52,9.06a80.54,80.54,0,0,1,116.86,108.9A84.9,84.9,0,0,0,176.35,118.16Z"/>
              <path fill="#192d50" d="M6,122.45a85.24,85.24,0,0,0,135.46,66.68c.69-.5,36.25,31.93,36.25,31.93L144.1,175.11a79.33,79.33,0,0,1-14.65,8.81c-1.44.66-2.89,1.26-4.34,1.83a80.55,80.55,0,0,1-100-119.34A85,85,0,0,0,6,122.45Z"/>
              <path fill="#f15a24" d="M508.39,189.49H478l-13.89-27.12-33.19-65.1-33.21,65.1-13.88,27.12H353.46l13.88-27.12L430.93,37.6l63.58,124.77Z"/>
              <path fill="#192d50" d="M142.21,71.63A69.56,69.56,0,0,1,83.65,179.26a69.84,69.84,0,0,1-51.4-22.45,70,70,0,0,0,128.47-38A69.2,69.2,0,0,0,142.21,71.63Z"/>
              <path fill="#192d50" d="M36.61,139.61A60.26,60.26,0,0,1,98.37,54.72,60.24,60.24,0,1,0,77.59,173.19,60.1,60.1,0,0,1,36.61,139.61Z"/>
              <path fill="#192d50" d="M139.66,86.87a52.32,52.32,0,0,0-55-25.74,52.3,52.3,0,0,1,11.39,103.7,52.29,52.29,0,0,0,43.57-78Z"/>
              <polygon fill="#192d50" points="182.6 181.06 179.56 186.61 176.53 181.06 170.99 178.03 176.53 175 179.56 169.45 182.6 175 188.14 178.03 182.6 181.06"/>
              <polygon fill="#192d50" points="146.23 214.62 146.21 217.67 143.65 216.01 140.61 215.99 142.26 213.44 142.28 210.39 144.84 212.05 147.88 212.07 146.23 214.62"/>
              <polygon fill="#192d50" points="15.42 186.82 12.55 192.08 9.67 186.82 4.42 183.95 9.67 181.07 12.55 175.82 15.42 181.07 20.68 183.95 15.42 186.82"/>
              <polygon fill="#192d50" points="154.66 40.11 152.17 44.65 149.69 40.11 145.15 37.63 149.69 35.15 152.17 30.61 154.66 35.15 159.19 37.63 154.66 40.11"/>
              <polygon fill="#192d50" points="42.37 14.95 39.23 20.7 36.08 14.95 30.33 11.81 36.08 8.66 39.23 2.92 42.37 8.66 48.12 11.81 42.37 14.95"/>
              <polygon fill="#192d50" points="8.21 64.58 6.33 68.03 4.44 64.58 1 62.7 4.44 60.81 6.33 57.37 8.21 60.81 11.65 62.7 8.21 64.58"/>
            </g>
          </svg>
        </StyledLink>
      ) : (
        <StyledLink href={href} as={linkComponent} aria-label="Quasar home page">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 981 222.08" width="150px">
            <g>
              <path fill="#192d50" d="M350.37,42.41v76a75.95,75.95,0,1,1-151.9,0V42.41h27.12v76a48.83,48.83,0,1,0,97.65,0V42.41Z"/>
              <path fill="#192d50" d="M632.78,84.51v-.87A14,14,0,0,0,618.9,69.75H557.27a14,14,0,0,0-13.89,13.89v.87A14,14,0,0,0,557.27,98.4H612A47.63,47.63,0,0,1,647.32,114c.65.65,1.09,1.3,1.74,2A48,48,0,0,1,612,194.31H564.43a48,48,0,0,1-48-48H543.6a20.84,20.84,0,0,0,20.83,20.84H612a20.84,20.84,0,1,0,0-41.67H557.27A40.58,40.58,0,0,1,528.84,114a38.06,38.06,0,0,1-5.21-6.51,40.38,40.38,0,0,1-7.16-23.22v-.87a40.94,40.94,0,0,1,40.8-41H618.9a41.12,41.12,0,0,1,41,41v.87Z"/>
              <path fill="#192d50" d="M822.71,194.31H792.33l-13.89-27.12-33.2-65.1L712,167.19l-13.89,27.12H667.77l13.89-27.12L745.24,42.41l63.58,124.78Z"/>
              <path fill="#192d50" d="M965.11,167.62,979,194.74H948.62l-13.89-27.12-14.54-28.43-.65-1.3a26.88,26.88,0,0,0-23-13H869.42v69.87H842.29V42.85h95.92A40.73,40.73,0,0,1,979,83.64,41.11,41.11,0,0,1,955.13,121a36,36,0,0,1-11.72,3.26Zm-26.9-69.87a12.65,12.65,0,0,0,5.64-1.31,13.78,13.78,0,0,0,8.24-12.58,14.31,14.31,0,0,0-4.12-10A13.66,13.66,0,0,0,938.21,70H869.42V98Z"/>
              <polygon fill="#fff" points="100.3 112.07 101.06 113.46 101.82 112.07 103.21 111.31 101.82 110.55 101.06 109.16 100.3 110.55 98.91 111.31 100.3 112.07"/>
              <path fill="#192d50" d="M104.12,119.73,2.6,14.39,84.9,133.52l.59.13C101.58,135.11,104.12,119.73,104.12,119.73Z"/>
              <path fill="#192d50" d="M176.35,118.16A85.21,85.21,0,0,0,34.4,56.09l5.52,9.06a80.54,80.54,0,0,1,116.86,108.9A84.9,84.9,0,0,0,176.35,118.16Z"/>
              <path fill="#192d50" d="M6,122.45a85.24,85.24,0,0,0,135.46,66.68c.69-.5,36.25,31.93,36.25,31.93L144.1,175.11a79.33,79.33,0,0,1-14.65,8.81c-1.44.66-2.89,1.26-4.34,1.83a80.55,80.55,0,0,1-100-119.34A85,85,0,0,0,6,122.45Z"/>
              <path fill="#f15a24" d="M508.39,189.49H478l-13.89-27.12-33.19-65.1-33.21,65.1-13.88,27.12H353.46l13.88-27.12L430.93,37.6l63.58,124.77Z"/>
              <path fill="#192d50" d="M142.21,71.63A69.56,69.56,0,0,1,83.65,179.26a69.84,69.84,0,0,1-51.4-22.45,70,70,0,0,0,128.47-38A69.2,69.2,0,0,0,142.21,71.63Z"/>
              <path fill="#192d50" d="M36.61,139.61A60.26,60.26,0,0,1,98.37,54.72,60.24,60.24,0,1,0,77.59,173.19,60.1,60.1,0,0,1,36.61,139.61Z"/>
              <path fill="#192d50" d="M139.66,86.87a52.32,52.32,0,0,0-55-25.74,52.3,52.3,0,0,1,11.39,103.7,52.29,52.29,0,0,0,43.57-78Z"/>
              <polygon fill="#192d50" points="182.6 181.06 179.56 186.61 176.53 181.06 170.99 178.03 176.53 175 179.56 169.45 182.6 175 188.14 178.03 182.6 181.06"/>
              <polygon fill="#192d50" points="146.23 214.62 146.21 217.67 143.65 216.01 140.61 215.99 142.26 213.44 142.28 210.39 144.84 212.05 147.88 212.07 146.23 214.62"/>
              <polygon fill="#192d50" points="15.42 186.82 12.55 192.08 9.67 186.82 4.42 183.95 9.67 181.07 12.55 175.82 15.42 181.07 20.68 183.95 15.42 186.82"/>
              <polygon fill="#192d50" points="154.66 40.11 152.17 44.65 149.69 40.11 145.15 37.63 149.69 35.15 152.17 30.61 154.66 35.15 159.19 37.63 154.66 40.11"/>
              <polygon fill="#192d50" points="42.37 14.95 39.23 20.7 36.08 14.95 30.33 11.81 36.08 8.66 39.23 2.92 42.37 8.66 48.12 11.81 42.37 14.95"/>
              <polygon fill="#192d50" points="8.21 64.58 6.33 68.03 4.44 64.58 1 62.7 4.44 60.81 6.33 57.37 8.21 60.81 11.65 62.7 8.21 64.58"/>
            </g>
          </svg>
        </StyledLink>
      )}
    </Flex>
  );
};

export default React.memo(Logo, (prev, next) => prev.isDark === next.isDark);
